var Me=Object.defineProperty,$e=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var re=(r,t,n)=>t in r?Me(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,I=(r,t)=>{for(var n in t||(t={}))Fe.call(t,n)&&re(r,n,t[n]);if(se)for(var n of se(t))Be.call(t,n)&&re(r,n,t[n]);return r},_=(r,t)=>$e(r,ze(t));var Ue=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var P=(r,t,n)=>new Promise((s,a)=>{var o=d=>{try{x(n.next(d))}catch(p){a(p)}},l=d=>{try{x(n.throw(d))}catch(p){a(p)}},x=d=>d.done?s(d.value):Promise.resolve(d.value).then(o,l);x((n=n.apply(r,t)).next())});import{r as u,a as We,R as qe,b as M}from"./vendor-DqJQAOCM.js";import{R as ae,S as J,M as $,a as X,C as z,E as pe,A as He,b as Ze,c as fe,d as Qe,P as ye,F as Ve,Z as be,e as B,B as ne,T as Ye,f as ee,g as je,h as Ge,i as Q,j as ve,k as we,l as Z,U as Ne,m as Ke,n as Je,o as V,p as Xe,X as et,q as tt}from"./ui-qWb_eO8n.js";var Pt=Ue((D,Ae)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Se={exports:{}},U={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var st=u,rt=Symbol.for("react.element"),at=Symbol.for("react.fragment"),nt=Object.prototype.hasOwnProperty,it=st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ot={key:!0,ref:!0,__self:!0,__source:!0};function Ce(r,t,n){var s,a={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)nt.call(t,s)&&!ot.hasOwnProperty(s)&&(a[s]=t[s]);if(r&&r.defaultProps)for(s in t=r.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:rt,type:r,key:o,ref:l,props:a,_owner:it.current}}U.Fragment=at;U.jsx=Ce;U.jsxs=Ce;Se.exports=U;var e=Se.exports,Y={},ie=We;Y.createRoot=ie.createRoot,Y.hydrateRoot=ie.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function F(){return F=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},F.apply(this,arguments)}var O;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(O||(O={}));const oe="popstate";function lt(r){r===void 0&&(r={});function t(s,a){let{pathname:o,search:l,hash:x}=s.location;return G("",{pathname:o,search:l,hash:x},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Te(a)}return dt(t,n,null,r)}function ke(r,t){if(r===!1||r===null||typeof r=="undefined")throw new Error(t)}function ct(){return Math.random().toString(36).substr(2,8)}function le(r,t){return{usr:r.state,key:r.key,idx:t}}function G(r,t,n,s){return n===void 0&&(n=null),F({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?Ie(t):t,{state:n,key:t&&t.key||s||ct()})}function Te(r){let{pathname:t="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Ie(r){let t={};if(r){let n=r.indexOf("#");n>=0&&(t.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(t.search=r.substr(s),r=r.substr(0,s)),r&&(t.pathname=r)}return t}function dt(r,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,x=O.Pop,d=null,p=y();p==null&&(p=0,l.replaceState(F({},l.state,{idx:p}),""));function y(){return(l.state||{idx:null}).idx}function w(){x=O.Pop;let h=y(),N=h==null?null:h-p;p=h,d&&d({action:x,location:k.location,delta:N})}function v(h,N){x=O.Push;let T=G(k.location,h,N);p=y()+1;let m=le(T,p),c=k.createHref(T);try{l.pushState(m,"",c)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(c)}o&&d&&d({action:x,location:k.location,delta:1})}function C(h,N){x=O.Replace;let T=G(k.location,h,N);p=y();let m=le(T,p),c=k.createHref(T);l.replaceState(m,"",c),o&&d&&d({action:x,location:k.location,delta:0})}function j(h){let N=a.location.origin!=="null"?a.location.origin:a.location.href,T=typeof h=="string"?h:Te(h);return T=T.replace(/ $/,"%20"),ke(N,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,N)}let k={get action(){return x},get location(){return r(a,l)},listen(h){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(oe,w),d=h,()=>{a.removeEventListener(oe,w),d=null}},createHref(h){return t(a,h)},createURL:j,encodeLocation(h){let N=j(h);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:C,go(h){return l.go(h)}};return k}var ce;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(ce||(ce={}));function mt(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}const _e=["post","put","patch","delete"];new Set(_e);const xt=["get",..._e];new Set(xt);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function K(){return K=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},K.apply(this,arguments)}const ut=u.createContext(null),Ee=u.createContext(null);function gt(){return u.useContext(Ee)!=null}function ht(r,t){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function pt(r){let{basename:t="/",children:n=null,location:s,navigationType:a=O.Pop,navigator:o,static:l=!1,future:x}=r;gt()&&ke(!1);let d=t.replace(/^\/*/,"/"),p=u.useMemo(()=>({basename:d,navigator:o,static:l,future:K({v7_relativeSplatPath:!1},x)}),[d,x,o,l]);typeof s=="string"&&(s=Ie(s));let{pathname:y="/",search:w="",hash:v="",state:C=null,key:j="default"}=s,k=u.useMemo(()=>{let h=mt(y,d);return h==null?null:{location:{pathname:h,search:w,hash:v,state:C,key:j},navigationType:a}},[d,y,w,v,C,j,a]);return k==null?null:u.createElement(ut.Provider,{value:p},u.createElement(Ee.Provider,{children:n,value:k}))}new Promise(()=>{});/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ft="6";try{window.__reactRouterVersion=ft}catch(r){}const yt="startTransition",de=qe[yt];function bt(r){let{basename:t,children:n,future:s,window:a}=r,o=u.useRef();o.current==null&&(o.current=lt({window:a,v5Compat:!0}));let l=o.current,[x,d]=u.useState({action:l.action,location:l.location}),{v7_startTransition:p}=s||{},y=u.useCallback(w=>{p&&de?de(()=>d(w)):d(w)},[d,p]);return u.useLayoutEffect(()=>l.listen(y),[l,y]),u.useEffect(()=>ht(s),[s]),u.createElement(pt,{basename:t,children:n,location:x.location,navigationType:x.action,navigator:l,future:s})}var me;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(me||(me={}));var xe;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(xe||(xe={}));const W=u.createContext(),jt=({children:r})=>{const[t,n]=u.useState([]),[s,a]=u.useState(null),[o,l]=u.useState(!1),[x,d]=u.useState(null),p=[{id:"1",sender:"project.manager@company.com",subject:"Q4 Project Review Meeting",body:"Hi team, We need to schedule the Q4 project review meeting for next week. Please review the attached project report...",timestamp:"2024-01-08T10:30:00Z",category:"Important",priority:"high",is_read:!1,is_archived:!1,action_items:[{task:"Review project report",deadline:"2024-01-12",priority:"high"}],summary:"Meeting request for Q4 project review with attached report",metadata:{}},{id:"2",sender:"newsletter@techdaily.com",subject:"Tech Daily: AI Trends in 2024",body:"Welcome to this week's Tech Daily newsletter! Featured Articles: - The Rise of Multimodal AI Systems...",timestamp:"2024-01-08T08:15:00Z",category:"Newsletter",priority:"low",is_read:!0,is_archived:!1,action_items:[],summary:"Weekly tech newsletter featuring AI trends and developments",metadata:{type:"newsletter"}},{id:"3",sender:"hr@company.com",subject:"ACTION REQUIRED: Benefits Enrollment Deadline",body:"Dear Employee, This is a reminder that the benefits enrollment period closes this Friday...",timestamp:"2024-01-08T09:45:00Z",category:"To-Do",priority:"high",is_read:!1,is_archived:!1,action_items:[{task:"Complete benefits enrollment",deadline:"2024-01-12",priority:"high"}],summary:"Benefits enrollment reminder with Friday deadline",metadata:{action_required:!0}}],C={emails:t,selectedEmail:s,setSelectedEmail:a,loading:o,error:x,loadEmails:()=>P(D,null,function*(){l(!0),d(null);try{yield new Promise(j=>setTimeout(j,1e3)),n(p)}catch(j){d("Failed to load emails"),console.error("Error loading emails:",j)}finally{l(!1)}}),loadMockEmails:()=>P(D,null,function*(){l(!0),d(null);try{yield new Promise(j=>setTimeout(j,500)),n(p)}catch(j){d("Failed to load mock emails"),console.error("Error loading mock emails:",j)}finally{l(!1)}}),updateEmailCategory:(j,k)=>P(D,null,function*(){try{n(h=>h.map(N=>N.id===j?_(I({},N),{category:k}):N)),s&&s.id===j&&a(h=>_(I({},h),{category:k}))}catch(h){throw console.error("Error updating email category:",h),h}})};return e.jsx(W.Provider,{value:C,children:r})},ue=()=>{const{emails:r,loadEmails:t,loading:n,selectedEmail:s,setSelectedEmail:a,loadMockEmails:o}=u.useContext(W),[l,x]=u.useState(""),[d,p]=u.useState("all"),[y,w]=u.useState("newest");u.useEffect(()=>{o()},[]);const v=["all","Important","Newsletter","Spam","To-Do"],j=[...r.filter(m=>{const c=m.subject.toLowerCase().includes(l.toLowerCase())||m.sender.toLowerCase().includes(l.toLowerCase())||m.body.toLowerCase().includes(l.toLowerCase()),S=d==="all"||m.category===d;return c&&S})].sort((m,c)=>y==="newest"?new Date(c.timestamp)-new Date(m.timestamp):y==="oldest"?new Date(m.timestamp)-new Date(c.timestamp):y==="sender"?m.sender.localeCompare(c.sender):0),h={all:r.length,Important:r.filter(c=>c.category==="Important").length,Newsletter:r.filter(c=>c.category==="Newsletter").length,Spam:r.filter(c=>c.category==="Spam").length,"To-Do":r.filter(c=>c.category==="To-Do").length},N=m=>new Date(m).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=m=>{switch(m){case"high":return e.jsx(Qe,{className:"h-4 w-4 text-red-500"});case"medium":return e.jsx(z,{className:"h-4 w-4 text-yellow-500"});case"low":return e.jsx(fe,{className:"h-4 w-4 text-green-500"});default:return e.jsx($,{className:"h-4 w-4 text-gray-400"})}};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inbox"}),e.jsx("p",{className:"text-gray-600",children:"Manage and process your emails with AI"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:o,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Load Mock Inbox"}),e.jsxs("button",{onClick:t,disabled:n,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(ae,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-2",children:v.map(m=>e.jsxs("button",{onClick:()=>p(m),className:`flex items-center px-4 py-2 rounded-lg border whitespace-nowrap ${d===m?"bg-indigo-50 border-indigo-500 text-indigo-700":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"font-medium capitalize",children:m}),e.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-gray-100 rounded-full",children:h[m]})]},m))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search emails...",value:l,onChange:m=>x(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("select",{value:y,onChange:m=>w(m.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"sender",children:"By Sender"})]})]})]}),e.jsxs("div",{className:"flex-1 flex gap-6 min-h-0",children:[e.jsx("div",{className:`${s?"w-1/2":"w-full"} flex flex-col`,children:e.jsx("div",{className:"flex-1 overflow-y-auto bg-white rounded-lg border border-gray-200",children:n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ae,{className:"h-8 w-8 animate-spin text-gray-400"})}):j.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No emails found"}),e.jsx("p",{className:"text-sm",children:"Load mock data to get started"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:j.map(m=>e.jsxs("div",{onClick:()=>a(m),className:`p-4 cursor-pointer transition-colors ${(s==null?void 0:s.id)===m.id?"bg-indigo-50 border-l-4 border-indigo-500":"hover:bg-gray-50"} ${m.is_read?"":"bg-blue-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[T(m.priority),e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:m.subject})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!m.is_read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${m.category==="Important"?"bg-red-100 text-red-800":m.category==="To-Do"?"bg-green-100 text-green-800":m.category==="Newsletter"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:m.category})]})]}),e.jsx("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:e.jsx("span",{className:"truncate",children:m.sender})}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:m.body}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:N(m.timestamp)}),m.action_items&&m.action_items.length>0&&e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(X,{className:"h-3 w-3"}),m.action_items.length," action(s)"]})]})]},m.id))})})}),s&&e.jsx("div",{className:"w-1/2 flex flex-col",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 flex-1 flex flex-col",children:[e.jsxs("div",{className:"border-b border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s.subject}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${s.category==="Important"?"bg-red-100 text-red-800":s.category==="To-Do"?"bg-green-100 text-green-800":s.category==="Newsletter"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.category})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"From: "}),s.sender]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"h-4 w-4"}),N(s.timestamp)]}),T(s.priority)]})]})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsx("div",{className:"prose max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-900",children:s.body})}),s.action_items&&s.action_items.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Action Items"}),e.jsx("div",{className:"space-y-2",children:s.action_items.map((m,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:m.task}),m.deadline&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",new Date(m.deadline).toLocaleDateString()]})]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${m.priority==="high"?"bg-red-100 text-red-800":m.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:m.priority||"medium"})]},c))})]}),s.summary&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"AI Summary"]}),e.jsx("p",{className:"text-gray-700",children:s.summary})]})]}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Reply"}),e.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(Ze,{className:"h-4 w-4"})})]})})]})})]})]})},Pe=u.createContext(),vt=({children:r})=>{const[t,n]=u.useState([]),s=[{id:"prompt-1",name:"Smart Categorization",description:"Intelligently categorize emails into relevant categories",template:"Categorize this email into one of: Important, Newsletter, Spam, To-Do...",category:"categorization",version:1,is_active:!0,is_system:!0,parameters:{},examples:[],created_at:"2024-01-08T10:00:00Z",updated_at:"2024-01-08T10:00:00Z"},{id:"prompt-2",name:"Action Item Extractor",description:"Extract specific tasks and action items from emails",template:"Extract all actionable tasks from this email. For each item, identify the task, deadline, and priority...",category:"action_extraction",version:1,is_active:!0,is_system:!0,parameters:{},examples:[],created_at:"2024-01-08T10:00:00Z",updated_at:"2024-01-08T10:00:00Z"},{id:"prompt-3",name:"Professional Reply Drafter",description:"Draft professional email responses",template:"Draft a professional email reply based on the original email. Be polite and address all points...",category:"reply_draft",version:1,is_active:!0,is_system:!0,parameters:{},examples:[],created_at:"2024-01-08T10:00:00Z",updated_at:"2024-01-08T10:00:00Z"}],a=d=>P(D,null,function*(){return new Promise(p=>{setTimeout(()=>{const y=_(I({},d),{id:`prompt-${Date.now()}`,version:1,is_system:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});n(w=>[y,...w]),p(y)},500)})}),o=(d,p)=>P(D,null,function*(){return new Promise(y=>{setTimeout(()=>{n(w=>w.map(v=>v.id===d?_(I(I({},v),p),{version:v.version+1,updated_at:new Date().toISOString()}):v)),y()},500)})}),l=d=>P(D,null,function*(){return new Promise(p=>{setTimeout(()=>{n(y=>y.filter(w=>w.id!==d)),p()},500)})});M.useEffect(()=>{n(s)},[]);const x={prompts:t,createPrompt:a,updatePrompt:o,deletePrompt:l};return e.jsx(Pe.Provider,{value:x,children:r})},wt=()=>{var te;const{prompts:r,createPrompt:t,updatePrompt:n,deletePrompt:s}=u.useContext(Pe),[a,o]=u.useState(null),[l,x]=u.useState(!1),[d,p]=u.useState(""),[y,w]=u.useState("all"),[v,C]=u.useState({name:"",description:"",template:"",category:"categorization",is_active:!0}),[j,k]=u.useState(!1),[h,N]=u.useState(""),[T,m]=u.useState(""),[c,S]=u.useState(!1),E=[{id:"categorization",name:"Categorization",icon:Ve,color:"bg-blue-100 text-blue-800"},{id:"action_extraction",name:"Action Extraction",icon:be,color:"bg-green-100 text-green-800"},{id:"reply_draft",name:"Reply Drafting",icon:X,color:"bg-purple-100 text-purple-800"},{id:"summary",name:"Summarization",icon:B,color:"bg-orange-100 text-orange-800"},{id:"analysis",name:"Analysis",icon:ne,color:"bg-indigo-100 text-indigo-800"}];u.useEffect(()=>{r.length>0&&!a&&o(r[0])},[r,a]);const L=r.filter(i=>{const b=i.name.toLowerCase().includes(d.toLowerCase())||i.description.toLowerCase().includes(d.toLowerCase())||i.template.toLowerCase().includes(d.toLowerCase()),R=y==="all"||i.category===y;return b&&R}),g=()=>P(D,null,function*(){if(!v.name||!v.template){alert("Please fill in all required fields");return}try{yield t(v),C({name:"",description:"",template:"",category:"categorization",is_active:!0})}catch(i){console.error("Failed to create prompt:",i),alert("Failed to create prompt")}}),f=()=>P(D,null,function*(){if(a)try{yield n(a.id,a),x(!1)}catch(i){console.error("Failed to update prompt:",i),alert("Failed to update prompt")}}),A=i=>P(D,null,function*(){if(confirm("Are you sure you want to delete this prompt?"))try{yield s(i),(a==null?void 0:a.id)===i&&o(L.find(b=>b.id!==i)||null)}catch(b){console.error("Failed to delete prompt:",b),alert("Failed to delete prompt")}}),q=()=>P(D,null,function*(){!a||!h||(S(!0),m("Testing prompt..."),setTimeout(()=>{m({categorization:"Important",action_extraction:'{"tasks": [{"task": "Review project report", "deadline": "2024-01-12", "priority": "high"}]}',reply_draft:"Thank you for your email. I will review this and get back to you shortly.",summary:"This email discusses project review requirements and budget considerations for Q4.",analysis:'{"sentiment": "professional", "urgency": "high", "key_topics": ["project review", "budget", "timeline"]}'}[a.category]||"Test completed successfully."),S(!1)},2e3))}),De=i=>{const b=E.find(R=>R.id===i);return b?b.icon:Q},H=i=>{const b=E.find(R=>R.id===i);return b?b.color:"bg-gray-100 text-gray-800"},Le=i=>i?i.length>100?i.substring(0,100)+"...":i:"No template defined",Re=i=>{navigator.clipboard.writeText(i).then(()=>{alert("Prompt template copied to clipboard!")})};return e.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Prompt Brain"}),e.jsx("p",{className:"text-gray-600",children:"Manage and customize AI prompt templates"})]}),e.jsxs("button",{onClick:()=>document.getElementById("create-prompt-modal").showModal(),className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"New Prompt"]})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-6 min-h-0",children:[e.jsxs("div",{className:`${a?"lg:w-2/5":"w-full"} flex flex-col`,children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search prompts...",value:d,onChange:i=>p(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("select",{value:y,onChange:i=>w(i.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),E.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-white rounded-lg border border-gray-200",children:L.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ne,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No prompts found"}),e.jsx("p",{className:"text-sm",children:"Create your first prompt to get started"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:L.map(i=>{var R;const b=De(i.category);return e.jsxs("div",{onClick:()=>{o(i),x(!1),k(!1)},className:`p-4 cursor-pointer transition-colors ${(a==null?void 0:a.id)===i.id?"bg-indigo-50 border-l-4 border-indigo-500":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:`h-4 w-4 ${H(i.category).split(" ")[1]}`}),e.jsx("h3",{className:"font-semibold text-gray-900",children:i.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[i.is_active&&e.jsx(fe,{className:"h-4 w-4 text-green-500"}),i.is_system&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-gray-100 text-gray-800 text-xs",children:"System"})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:i.description||"No description"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full ${H(i.category)}`,children:((R=E.find(Oe=>Oe.id===i.category))==null?void 0:R.name)||i.category}),e.jsxs("span",{children:["v",i.version]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-400 font-mono",children:Le(i.template)})]},i.id)})})})]}),a&&e.jsx("div",{className:"lg:w-3/5 flex flex-col",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 flex-1 flex flex-col",children:[e.jsxs("div",{className:"border-b border-gray-200 p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"flex-1",children:l?e.jsx("input",{type:"text",value:a.name,onChange:i=>o(b=>_(I({},b),{name:i.target.value})),className:"w-full text-lg font-semibold border-b border-gray-300 focus:border-indigo-500 focus:outline-none pb-1"}):e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a.name})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>k(!j),className:`inline-flex items-center px-3 py-1 rounded-lg text-sm ${j?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Ye,{className:"h-4 w-4 mr-1"}),"Test"]}),e.jsx("button",{onClick:()=>Re(a.template),className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100",children:e.jsx(ee,{className:"h-4 w-4"})}),!a.is_system&&e.jsx("button",{onClick:()=>A(a.id),className:"p-2 text-red-500 hover:text-red-700 rounded-lg hover:bg-red-50",children:e.jsx(je,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),l?e.jsx("select",{value:a.category,onChange:i=>o(b=>_(I({},b),{category:i.target.value})),className:"border border-gray-300 rounded px-2 py-1",children:E.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))}):e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full ${H(a.category)}`,children:((te=E.find(i=>i.id===a.category))==null?void 0:te.name)||a.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),l?e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.is_active,onChange:i=>o(b=>_(I({},b),{is_active:i.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{children:"Active"})]}):e.jsx("span",{className:`inline-flex items-center ${a.is_active?"text-green-600":"text-gray-400"}`,children:a.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Version:"}),e.jsxs("span",{className:"text-gray-900",children:["v",a.version]})]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:l?e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:i=>o(b=>_(I({},b),{description:i.target.value})),placeholder:"Describe what this prompt does...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:"3"})]}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prompt Template"}),e.jsx("textarea",{value:a.template,onChange:i=>o(b=>_(I({},b),{template:i.target.value})),placeholder:"Enter your prompt template here...",className:"w-full h-full p-3 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none"})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:a.description||"No description provided."})]}),e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Template"}),e.jsx("pre",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 font-mono text-sm whitespace-pre-wrap overflow-x-auto",children:a.template})]})]})}),j&&e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Test Prompt"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Test Input"}),e.jsx("textarea",{value:h,onChange:i=>N(i.target.value),placeholder:"Enter test email content...",className:"w-full p-3 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Output"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200 min-h-[100px]",children:c?e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600"}),"Testing prompt..."]}):e.jsx("pre",{className:"font-mono text-sm whitespace-pre-wrap",children:T||"Run test to see output..."})})]}),e.jsxs("button",{onClick:q,disabled:!h||c,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Run Test"]})]})]})}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:a.is_system&&e.jsxs("span",{className:"inline-flex items-center text-orange-600",children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"System Prompt"]})}),e.jsx("div",{className:"flex gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:f,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Save Prompt"]})]}):!a.is_system&&e.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Edit Prompt"]})})]})})]})})]}),e.jsxs("dialog",{id:"create-prompt-modal",className:"modal",children:[e.jsxs("div",{className:"modal-box max-w-2xl",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Create New Prompt"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:v.name,onChange:i=>C(b=>_(I({},b),{name:i.target.value})),placeholder:"Enter prompt name...",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:v.description,onChange:i=>C(b=>_(I({},b),{description:i.target.value})),placeholder:"Describe what this prompt does...",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsx("select",{value:v.category,onChange:i=>C(b=>_(I({},b),{category:i.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:E.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template *"}),e.jsx("textarea",{value:v.template,onChange:i=>C(b=>_(I({},b),{template:i.target.value})),placeholder:"Enter your prompt template...",className:"w-full p-2 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:"8"})]})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-ghost mr-2",children:"Cancel"})}),e.jsx("button",{onClick:g,disabled:!v.name||!v.template,className:"btn btn-primary",children:"Create Prompt"})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{children:"close"})})]})]})},Nt=()=>{const{emails:r,selectedEmail:t,setSelectedEmail:n}=u.useContext(W),[s,a]=u.useState([]),[o,l]=u.useState(""),[x,d]=u.useState(!1),[p,y]=u.useState([]),w=u.useRef(null),v=["Summarize my latest emails","What urgent tasks do I have?","Draft a reply to the most important email","Show me emails from this week","Categorize my unread emails"],C=()=>{var c;(c=w.current)==null||c.scrollIntoView({behavior:"smooth"})};u.useEffect(()=>{C()},[s]),u.useEffect(()=>{a([{id:1,type:"agent",content:"Hello! I'm your Email Productivity Agent. I can help you manage your inbox, summarize emails, extract tasks, and draft responses. How can I assist you today?",timestamp:new Date().toISOString()}])},[]);const j=()=>P(D,null,function*(){if(!o.trim())return;const c={id:Date.now(),type:"user",content:o,timestamp:new Date().toISOString()};a(S=>[...S,c]),l(""),d(!0),setTimeout(()=>{var g;const S={summarize:`I've analyzed your inbox. You have ${r.length} emails with the following breakdown:
• ${r.filter(f=>f.category==="Important").length} important emails
• ${r.filter(f=>f.category==="To-Do").length} actionable items
• ${r.filter(f=>f.category==="Newsletter").length} newsletters

The most urgent email is about the Q4 Project Review from ${(g=r[0])==null?void 0:g.sender}.`,tasks:`Here are your pending tasks:
${r.filter(f=>f.action_items&&f.action_items.length>0).map(f=>f.action_items.map(A=>`• ${A.task} (Priority: ${A.priority||"medium"})`).join(`
`)).join(`
`)||"No specific tasks found in your emails."}`,draft:`I can help draft a reply! Please specify which email you'd like me to respond to, or use one of these options:
• "Draft reply to [sender name]"
• "Write professional response to meeting request"
• "Create casual reply to colleague"`,default:`I understand you're asking about: "${o}". I can help you with:
• Email summarization and analysis
• Task extraction and prioritization
• Drafting professional responses
• Email categorization and organization
• Inbox management suggestions

What specific assistance would you like?`};let E=S.default;o.toLowerCase().includes("summarize")?E=S.summarize:o.toLowerCase().includes("task")?E=S.tasks:(o.toLowerCase().includes("draft")||o.toLowerCase().includes("reply"))&&(E=S.draft);const L={id:Date.now()+1,type:"agent",content:E,timestamp:new Date().toISOString(),suggestions:k(o)};a(f=>[...f,L]),d(!1)},1500)}),k=c=>c.toLowerCase().includes("summarize")?["Show me only urgent emails","What are my action items?","Summarize emails from today"]:c.toLowerCase().includes("task")?["Show tasks with deadlines","What's most urgent?","Create a task list"]:["Summarize my inbox","What needs my attention?","Draft a meeting response"],h=c=>{l(c)},N=c=>{l(c)},T=c=>new Date(c).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),m=c=>{navigator.clipboard.writeText(c)};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(Z,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Email Agent"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your AI-powered email assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${x?"bg-green-500 animate-pulse":"bg-gray-300"}`}),e.jsx("span",{className:"text-sm text-gray-600",children:x?"Thinking...":"Online"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row min-h-0",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map((c,S)=>e.jsx("button",{onClick:()=>h(c),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm transition-colors",children:c},S))})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.map(c=>e.jsxs("div",{className:`flex gap-3 ${c.type==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${c.type==="user"?"bg-indigo-100 text-indigo-600":"bg-gradient-to-r from-indigo-500 to-purple-600 text-white"}`,children:c.type==="user"?e.jsx(Ne,{className:"h-4 w-4"}):e.jsx(Z,{className:"h-4 w-4"})}),e.jsxs("div",{className:`flex-1 max-w-3xl ${c.type==="user"?"text-right":""}`,children:[e.jsxs("div",{className:`inline-block rounded-2xl px-4 py-2 ${c.type==="user"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("p",{className:"whitespace-pre-wrap",children:c.content}),c.suggestions&&c.type==="agent"&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 border-opacity-30",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:c.suggestions.map((S,E)=>e.jsx("button",{onClick:()=>N(S),className:"px-2 py-1 bg-white bg-opacity-20 rounded-lg text-sm hover:bg-opacity-30 transition-colors",children:S},E))})})]}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 ${c.type==="user"?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-xs text-gray-500",children:T(c.timestamp)}),c.type==="agent"&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>m(c.content),className:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Copy response",children:e.jsx(ee,{className:"h-3 w-3"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-green-600 rounded",title:"Helpful",children:e.jsx(Ke,{className:"h-3 w-3"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-red-600 rounded",title:"Not helpful",children:e.jsx(Je,{className:"h-3 w-3"})})]})]})]})]},c.id)),x&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(Z,{className:"h-4 w-4 text-white"})}),e.jsx("div",{className:"flex-1 max-w-3xl",children:e.jsx("div",{className:"inline-block bg-gray-100 rounded-2xl px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),e.jsx("div",{ref:w})]}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:c=>l(c.target.value),onKeyPress:c=>c.key==="Enter"&&j(),placeholder:"Ask me anything about your emails...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:x}),e.jsxs("button",{onClick:j,disabled:!o.trim()||x,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Send"]})]})})]}),e.jsxs("div",{className:"lg:w-80 border-l border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Email Context"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selected email for reference"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:t?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:t.subject}),e.jsx("p",{className:"text-sm text-gray-600",children:t.sender})]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.category==="Important"?"bg-red-100 text-red-800":t.category==="To-Do"?"bg-green-100 text-green-800":t.category==="Newsletter"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:t.category})]}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-4",children:t.body}),t.action_items&&t.action_items.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("h5",{className:"text-xs font-semibold text-gray-900 mb-2",children:"Action Items"}),e.jsx("div",{className:"space-y-1",children:t.action_items.map((c,S)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:c.task})]},S))})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No email selected"}),e.jsx("p",{className:"text-xs",children:"Select an email from the inbox to use as context"})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>h("Summarize this email"),className:"w-full flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[e.jsx(B,{className:"h-4 w-4 text-gray-600"}),"Summarize Email"]}),e.jsxs("button",{onClick:()=>h("Extract tasks from this email"),className:"w-full flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[e.jsx(be,{className:"h-4 w-4 text-gray-600"}),"Extract Tasks"]}),e.jsxs("button",{onClick:()=>h("Draft a reply to this email"),className:"w-full flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[e.jsx(V,{className:"h-4 w-4 text-gray-600"}),"Draft Reply"]})]})]})]})]})]})},St=()=>{var E,L;const{emails:r}=u.useContext(W),[t,n]=u.useState([]),[s,a]=u.useState(null),[o,l]=u.useState(!1),[x,d]=u.useState(""),[p,y]=u.useState("all"),[w,v]=u.useState(!0),C=[{id:"draft-1",subject:"Re: Q4 Project Review Meeting",body:`Dear Sarah,

Thank you for scheduling the Q4 project review meeting. I have reviewed the attached project report and would like to discuss the following points:

1. The budget utilization seems to be on track, but I have some questions about the Q1 resource allocation.
2. I've identified potential risks in the current timeline that we should address.

I'm available on Tuesday at 2:00 PM or Wednesday morning. Please let me know what works best for your schedule.

Best regards,
[Your Name]`,recipient:"project.manager@company.com",context_email_id:"1",status:"draft",tone:"professional",metadata:{ai_generated:!0,word_count:98,sentiment:"professional"},created_at:"2024-01-08T14:30:00Z",updated_at:"2024-01-08T14:30:00Z"},{id:"draft-2",subject:"Follow-up: Benefits Enrollment",body:`Hello HR Team,

I wanted to follow up on the benefits enrollment deadline. I've completed my selections but have a question about dependent coverage.

Could you please clarify if part-time dependents are eligible for coverage under the new plan?

Thank you for your assistance.

Best regards,
[Your Name]`,recipient:"hr@company.com",context_email_id:"3",status:"ready",tone:"formal",metadata:{ai_generated:!0,word_count:65,sentiment:"inquisitive"},created_at:"2024-01-08T15:45:00Z",updated_at:"2024-01-08T16:20:00Z"},{id:"draft-3",subject:"Lunch Meeting Confirmation",body:`Hey Mike!

The new Italian place sounds great! I'd love to discuss the marketing campaign and share some ideas I've been working on.

12:30 PM tomorrow works perfectly for me. Looking forward to it!

Cheers,
[Your Name]`,recipient:"colleague@company.com",context_email_id:"5",status:"draft",tone:"casual",metadata:{ai_generated:!0,word_count:45,sentiment:"friendly"},created_at:"2024-01-08T16:15:00Z",updated_at:"2024-01-08T16:15:00Z"}];u.useEffect(()=>{n(C),C.length>0&&!s&&a(C[0])},[]);const j=t.filter(g=>{const f=g.subject.toLowerCase().includes(x.toLowerCase())||g.recipient.toLowerCase().includes(x.toLowerCase())||g.body.toLowerCase().includes(x.toLowerCase()),A=p==="all"||g.status===p;return f&&A}),k=()=>{const g={id:`draft-${Date.now()}`,subject:"",body:"",recipient:"",status:"draft",tone:"professional",metadata:{ai_generated:!1,word_count:0,sentiment:"neutral"},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n(f=>[g,...f]),a(g),l(!0)},h=()=>{s&&(n(g=>g.map(f=>f.id===s.id?_(I({},s),{updated_at:new Date().toISOString()}):f)),l(!1))},N=g=>{n(f=>f.filter(A=>A.id!==g)),(s==null?void 0:s.id)===g&&a(j.find(f=>f.id!==g)||null)},T=(g,f)=>{s&&a(A=>_(I({},A),{[g]:f,metadata:_(I({},A.metadata),{word_count:g==="body"?f.split(/\s+/).filter(q=>q.length>0).length:A.metadata.word_count})}))},m=g=>{switch(g){case"draft":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"ready":return"bg-green-100 text-green-800 border-green-200";case"sent":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},c=g=>{switch(g){case"professional":return"bg-purple-100 text-purple-800";case"casual":return"bg-orange-100 text-orange-800";case"formal":return"bg-indigo-100 text-indigo-800";case"friendly":return"bg-teal-100 text-teal-800";default:return"bg-gray-100 text-gray-800"}},S=g=>new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Drafts"}),e.jsx("p",{className:"text-gray-600",children:"Create, edit, and manage your email drafts"})]}),e.jsxs("button",{onClick:k,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"New Draft"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Drafts"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(g=>g.status==="draft").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(g=>g.status==="ready").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ready to Send"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.filter(g=>{var f;return(f=g.metadata)==null?void 0:f.ai_generated}).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"AI Generated"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-6 min-h-0",children:[e.jsxs("div",{className:`${s?"lg:w-2/5":"w-full"} flex flex-col`,children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search drafts...",value:x,onChange:g=>d(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("select",{value:p,onChange:g=>y(g.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"sent",children:"Sent"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-white rounded-lg border border-gray-200",children:j.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(B,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No drafts found"}),e.jsx("p",{className:"text-sm",children:"Create your first draft to get started"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:j.map(g=>{var f;return e.jsxs("div",{onClick:()=>{a(g),l(!1)},className:`p-4 cursor-pointer transition-colors ${(s==null?void 0:s.id)===g.id?"bg-indigo-50 border-l-4 border-indigo-500":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:g.subject||"Untitled Draft"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${m(g.status)}`,children:g.status})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:g.recipient||"No recipient"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),S(g.updated_at)]}),((f=g.metadata)==null?void 0:f.ai_generated)&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-gradient-to-r from-purple-100 to-blue-100 text-purple-800 text-xs",children:"AI"})]})]},g.id)})})})]}),s&&e.jsx("div",{className:"lg:w-3/5 flex flex-col",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 flex-1 flex flex-col",children:[e.jsxs("div",{className:"border-b border-gray-200 p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"flex-1",children:o?e.jsx("input",{type:"text",value:s.subject,onChange:g=>T("subject",g.target.value),placeholder:"Email subject...",className:"w-full text-lg font-semibold border-b border-gray-300 focus:border-indigo-500 focus:outline-none pb-1"}):e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s.subject||"Untitled Draft"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>v(!w),className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100",children:w?e.jsx(Xe,{className:"h-4 w-4"}):e.jsx(pe,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100",children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(s.id),className:"p-2 text-red-500 hover:text-red-700 rounded-lg hover:bg-red-50",children:e.jsx(je,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"To:"}),o?e.jsx("input",{type:"text",value:s.recipient,onChange:g=>T("recipient",g.target.value),placeholder:"recipient@example.com",className:"border-b border-gray-300 focus:border-indigo-500 focus:outline-none flex-1 min-w-0"}):e.jsx("span",{className:"text-gray-900",children:s.recipient||"No recipient"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Tone:"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${c(s.tone)}`,children:s.tone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Words:"}),e.jsx("span",{className:"text-gray-900",children:((E=s.metadata)==null?void 0:E.word_count)||0})]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:o?e.jsx("textarea",{value:s.body,onChange:g=>T("body",g.target.value),placeholder:"Write your email here...",className:"flex-1 p-4 resize-none border-none focus:outline-none focus:ring-0",rows:"15"}):e.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"prose max-w-none",children:s.body?e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-900",children:s.body}):e.jsx("p",{className:"text-gray-500 italic",children:"No content yet. Start editing to add your email content."})})})}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(z,{className:"h-4 w-4"}),"Last updated: ",S(s.updated_at),((L=s.metadata)==null?void 0:L.ai_generated)&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-gradient-to-r from-purple-100 to-blue-100 text-purple-800 text-xs",children:"AI Generated"})]}),e.jsx("div",{className:"flex gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:h,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Save Draft"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Send"]})]})})]})})]})})]})]})};function Ct(){const[r,t]=u.useState(!1),[n,s]=u.useState("inbox"),[a,o]=u.useState(!0),l=[{id:"inbox",name:"Inbox",icon:$},{id:"agent",name:"Email Agent",icon:X},{id:"drafts",name:"Drafts",icon:B},{id:"prompts",name:"Prompt Brain",icon:Q}];u.useEffect(()=>{const d=setTimeout(()=>{o(!1)},2e3);return()=>clearTimeout(d)},[]);const x=()=>{switch(n){case"inbox":return e.jsx(ue,{});case"agent":return e.jsx(Nt,{});case"drafts":return e.jsx(St,{});case"prompts":return e.jsx(wt,{});default:return e.jsx(ue,{})}};return a?e.jsx("div",{className:"app-container",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"logo-loader",children:"✉️"}),e.jsx("div",{className:"loading-spinner"}),e.jsx("div",{className:"loading-text",children:"InboxAI"}),e.jsx("div",{className:"loading-subtext",children:"Your AI-powered email workspace is loading..."}),e.jsxs("div",{className:"loading-features",children:[e.jsx("div",{className:"feature-pill",children:"🤖 Smart AI Assistant"}),e.jsx("div",{className:"feature-pill",children:"⚡ Instant Processing"}),e.jsx("div",{className:"feature-pill",children:"🎯 Intelligent Organization"})]})]})}):e.jsx(jt,{children:e.jsx(vt,{children:e.jsx(bt,{children:e.jsxs("div",{className:"app-container",children:[e.jsx("div",{className:`lg:hidden ${r?"block":"hidden"}`,children:e.jsxs("div",{className:"fixed inset-0 flex z-40",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>t(!1)}),e.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:e.jsx("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>t(!1),children:e.jsx(et,{className:"h-6 w-6 text-white"})})}),e.jsx(ge,{navigation:l,activeTab:n,setActiveTab:s,onItemClick:()=>t(!1)})]})]})}),e.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0",children:e.jsx(ge,{navigation:l,activeTab:n,setActiveTab:s})}),e.jsxs("div",{className:"lg:pl-64 flex flex-col flex-1",children:[e.jsx("div",{className:"sticky top-0 z-10 lg:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-gray-100",children:e.jsx("button",{className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",onClick:()=>t(!0),children:e.jsx(tt,{className:"h-6 w-6"})})}),e.jsx("main",{className:"flex-1",children:e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:x()})})})]})]})})})})}const ge=({navigation:r,activeTab:t,setActiveTab:n,onItemClick:s})=>e.jsx("div",{className:"flex-1 flex flex-col min-h-0 border-r border-gray-200 bg-white",children:e.jsxs("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center flex-shrink-0 px-4",children:[e.jsx($,{className:"h-8 w-8 text-indigo-600"}),e.jsx("h1",{className:"ml-3 text-xl font-semibold text-gray-900",children:"Email Agent"})]}),e.jsx("nav",{className:"mt-8 flex-1 px-4 space-y-2",children:r.map(a=>{const o=a.icon;return e.jsxs("button",{onClick:()=>{n(a.id),s&&s()},className:`group flex items-center px-3 py-2 text-sm font-medium rounded-md w-full text-left ${t===a.id?"bg-indigo-50 text-indigo-700 border-indigo-500 border":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(o,{className:`flex-shrink-0 h-5 w-5 mr-3 ${t===a.id?"text-indigo-500":"text-gray-400"}`}),a.name]},a.id)})})]})});class kt extends M.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null,errorType:"general"}}static getDerivedStateFromError(t){var s,a,o,l,x,d;let n="general";return(s=t.message)!=null&&s.includes("NetworkError")||(a=t.message)!=null&&a.includes("Failed to fetch")?n="network":(o=t.message)!=null&&o.includes("OpenAI")||(l=t.message)!=null&&l.includes("API")?n="ai_service":((x=t.message)!=null&&x.includes("OAuth")||(d=t.message)!=null&&d.includes("authentication"))&&(n="auth"),{hasError:!0,errorType:n}}componentDidCatch(t,n){this.setState({error:t,errorInfo:n}),console.error("InboxAI Error Boundary caught an error:",{error:t.toString(),errorType:this.state.errorType,componentStack:n.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent}),this.reportErrorToService(t,n)}reportErrorToService(t,n){try{window.gtag&&window.gtag("event","exception",{description:t.toString(),fatal:!0})}catch(s){console.warn("Error reporting failed:",s)}}getErrorMessage(){const{errorType:t}=this.state,n={network:{title:"Connection Issue",description:"We're having trouble connecting to our services. Please check your internet connection.",action:"Check Connection"},ai_service:{title:"AI Service Temporarily Unavailable",description:"Our AI features are currently experiencing issues. Basic email functions remain available.",action:"Retry AI Features"},auth:{title:"Authentication Error",description:"There was an issue with your email provider connection. Please reconnect your account.",action:"Reconnect Account"},general:{title:"Something went wrong",description:"We're sorry, but the application encountered an unexpected error.",action:"Reload Application"}};return n[t]||n.general}render(){if(this.state.hasError){const t=this.getErrorMessage();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4 dark:from-red-900 dark:to-red-800",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center dark:bg-gray-800",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 dark:bg-red-900",children:this.state.errorType==="network"?e.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"})}):this.state.errorType==="ai_service"?e.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}):e.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2 dark:text-white",children:t.title}),e.jsx("p",{className:"text-gray-600 mb-4 dark:text-gray-300",children:t.description}),!1,e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:t.action}),this.state.errorType==="auth"&&e.jsx("button",{onClick:()=>{window.location.hash="#providers",this.setState({hasError:!1,error:null,errorInfo:null})},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Go to Connections"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:bg-gray-600 dark:text-gray-300",children:"Try Again"})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Need help? Here are some options:"}),e.jsxs("div",{className:"flex justify-center gap-4 text-xs",children:[e.jsx("button",{onClick:()=>window.open("https://github.com/your-username/inboxai/issues","_blank"),className:"text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",children:"Report Issue"}),e.jsx("button",{onClick:()=>window.open("mailto:support@inboxai.example.com","_blank"),className:"text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",children:"Contact Support"}),e.jsx("button",{onClick:()=>window.open("https://inboxai.example.com/docs","_blank"),className:"text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",children:"Documentation"})]})]})]})})}return this.props.children}}const Tt=r=>function(n){const[s,a]=M.useState({appLoadTime:null,aiOperationTimes:[],networkRequests:[]});return M.useEffect(()=>{const o=performance.now(),l=window.fetch;return window.fetch=function(...x){const d=performance.now();return l.apply(this,x).then(p=>{var w,v;const y=performance.now()-d;return((w=x[0])!=null&&w.includes("/api/")||(v=x[0])!=null&&v.includes("openai"))&&a(C=>_(I({},C),{aiOperationTimes:[...C.aiOperationTimes,{endpoint:x[0],duration:y,timestamp:new Date().toISOString()}].slice(-20)})),p})},()=>{const x=performance.now()-o;window.fetch=l,a(d=>_(I({},d),{appLoadTime:x})),window.gtag&&window.gtag("event","app_load",{load_time:Math.round(x),ai_operations:s.aiOperationTimes.length})}},[]),M.useEffect(()=>{const l=setInterval(()=>P(this,null,function*(){try{(yield fetch("/api/v1/health/ai")).ok||console.warn("⚠️  AI service health check failed")}catch(x){console.warn("⚠️  AI service health check failed:",x)}}),3e5);return()=>clearInterval(l)},[]),e.jsx(r,I({},n))},It=Tt(Ct),_t=({children:r})=>{const[t,n]=M.useState(!1);return r},he=()=>{var t,n;const r=document.getElementById("root");if(!r){console.error("Root element not found!"),document.body.innerHTML=`
      <div style="display: flex; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-family: system-ui;">
        <div style="text-align: center;">
          <div style="font-size: 2rem; margin-bottom: 1rem;">❌</div>
          <h1 style="font-size: 1.5rem; margin-bottom: 0.5rem;">InboxAI Failed to Load</h1>
          <p style="margin-bottom: 1rem;">Critical error: Root element missing</p>
          <button onclick="window.location.reload()" style="padding: 0.5rem 1rem; background: white; color: #6366f1; border: none; border-radius: 0.5rem; cursor: pointer;">
            Restart Application
          </button>
        </div>
      </div>
    `;return}try{Y.createRoot(r).render(e.jsx(_t,{children:e.jsx(kt,{children:e.jsx(It,{})})})),console.log(`
    🚀 InboxAI Initialized Successfully!
    
    Features Available:
    ✅ Real Email Integration (Gmail, Outlook)
    ✅ Advanced OpenAI AI Processing
    ✅ Smart Email Categorization
    ✅ AI-Powered Draft Generation
    ✅ Cross-Email Insights
    ✅ Productivity Analytics
    
    Next Steps:
    1. Connect your email provider in Settings
    2. Configure OpenAI API for enhanced features
    3. Start managing emails with AI assistance
    
    Need help? Check /docs for integration guides.
    `);const a=document.querySelector(".loading-container");if(a){const o=document.createElement("div");o.className="loading-success",o.innerHTML=`
        <div style="text-align: center; color: white; margin-top: 1rem;">
          <div style="font-size: 2rem;">🎉</div>
          <div>InboxAI Ready!</div>
        </div>
      `,a.appendChild(o),setTimeout(()=>{a.style.opacity="0",a.style.transform="scale(0.95)",a.style.transition="all 0.5s ease",setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a)},500)},1e3)}}catch(s){console.error("💥 Failed to initialize InboxAI:",s);let a="Please refresh the page and try again.";(t=s.message)!=null&&t.includes("ReactDOM")?a="This might be a browser compatibility issue. Try updating your browser.":(n=s.message)!=null&&n.includes("memory")&&(a="Your device is low on memory. Try closing other tabs and refresh."),r.innerHTML=`
      <div class="loading-container" style="background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);">
        <div style="font-size: 3rem; margin-bottom: 1rem;">💥</div>
        <div class="loading-text" style="font-size: 1.5rem;">InboxAI Failed to Start</div>
        <div class="loading-subtext" style="margin-bottom: 1rem;">${a}</div>
        <div style="display: flex; gap: 0.5rem; justify-content: center;">
          <button onclick="window.location.reload()" style="padding: 0.75rem 1.5rem; background: white; color: #dc2626; border: none; border-radius: 0.75rem; cursor: pointer; font-weight: 600;">
            Restart Application
          </button>
          <button onclick="window.open('mailto:support@inboxai.example.com', '_blank')" style="padding: 0.75rem 1.5rem; background: transparent; color: white; border: 2px solid white; border-radius: 0.75rem; cursor: pointer; font-weight: 600;">
            Get Help
          </button>
        </div>
      </div>
    `}},Et=()=>{const t=Object.entries({"ES6 Modules":()=>typeof Ae!="undefined","Fetch API":()=>typeof fetch!="undefined",Promise:()=>typeof Promise!="undefined","Web Workers":()=>typeof Worker!="undefined"}).filter(([n,s])=>!s()).map(([n])=>n);if(t.length>0){console.error("Missing required browser features:",t),document.body.innerHTML=`
      <div style="display: flex; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; font-family: system-ui; text-align: center;">
        <div>
          <div style="font-size: 3rem; margin-bottom: 1rem;">⚠️</div>
          <h1 style="font-size: 1.5rem; margin-bottom: 1rem;">Browser Update Required</h1>
          <p style="margin-bottom: 1rem;">InboxAI requires modern browser features:</p>
          <ul style="margin-bottom: 1rem; text-align: left; display: inline-block;">
            ${t.map(n=>`<li>${n}</li>`).join("")}
          </ul>
          <p>Please update your browser or try Chrome, Firefox, or Safari.</p>
        </div>
      </div>
    `;return}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",he):he()};Et()});export default Pt();
